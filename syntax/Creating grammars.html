<!doctype html>
<html lang="en">
<head>
    <title>syntax Creating grammars</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="/">
            <img src="/images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="/language.html"> Language </a>
                    <a class="menu-item " href="/type.html"> Types </a>
                    <a class="menu-item " href="/routine.html"> Routines </a>
                    <a class="menu-item " href="/programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            
            

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:none;">
            <button title="Edit this page"  class="pencil" onclick="location=''">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">syntax Creating grammars</h1>
        <p class="subtitle"></p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#language_documentation_Grammars">language documentation Grammars</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#(Grammars)_Creating_grammars">(Grammars)  Creating grammars</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="#Proto_regexes">Proto regexes</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="#Special_tokens">Special tokens</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.3.1</td><td class="toc-text"><a href="#TOP"><code class="pod-code-inline">TOP</code></a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.3.2</td><td class="toc-text"><a href="#ws"><code class="pod-code-inline">ws</code></a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.3.3</td><td class="toc-text"><a href="#sym"><code class="pod-code-inline">sym</code></a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.3.4</td><td class="toc-text"><a href="#&quot;Always_succeed&quot;_assertion">&quot;Always succeed&quot; assertion</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.4</td><td class="toc-text"><a href="#Methods_in_grammars">Methods in grammars</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.5</td><td class="toc-text"><a href="#Dynamic_variables_in_grammars">Dynamic variables in grammars</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.6</td><td class="toc-text"><a href="#Attributes_in_grammars">Attributes in grammars</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.7</td><td class="toc-text"><a href="#Passing_arguments_into_grammars">Passing arguments into grammars</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <p>Documentation for syntax <code>Creating grammars</code> assembled from the following types:</p>
<h1 id="language_documentation_Grammars"><a class="u" href="#___top" title="go to top of document">language documentation Grammars</a></h1>
<p>From <a href="/language/grammars#Creating_grammars">Grammars</a></p>
<h2 id="(Grammars)_Creating_grammars"><a href="/language/grammars#Creating_grammars">(Grammars)  Creating grammars</a></h2>
<p><a href="/type/Grammar">Grammar</a> is the superclass that classes automatically get when they are declared with the <code>grammar</code> keyword instead of <code>class</code>. Grammars should only be used to parse text; if you wish to extract complex data, you can add actions within the grammar or use an <a href="/language/grammars#Action_objects">action object</a> in conjunction with the grammar.</p>
<h2 id="Proto_regexes"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-:sym<>-_proto_regex-_declarator_grammar-Proto_regexes"><span class="index-entry">Proto regexes</span></a></a></h2>
<p><a href="/type/Grammar">Grammar</a>s are composed of rules, tokens and regexes; these are actually methods, since grammars are classes.</p>
<p><a href="#fn-1" id="fn-ref-1">[1]</a></p>
<p>These methods can share a name and functionality in common, and thus can use <a href="/syntax/proto">proto</a>.</p>
<p>For instance, if you have a lot of alternations, it may become difficult to produce readable code or subclass your grammar. In the <code>Actions</code> class below, the ternary in <code>method TOP</code> is less than ideal and it becomes even worse the more operations we add:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Calculator</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;[&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>add</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>sub</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;]&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;&nbsp;</span><span class="entity name function regexp named raku"><span>add</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>+</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;&nbsp;</span><span class="entity name function regexp named raku"><span>sub</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>-</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>num</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Calculations</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TOP</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>add</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>add</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>sub</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>add</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;[</span><span class="keyword operator generic raku"><span>+</span></span><span>]&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>num</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>sub</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;[-]&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>num</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculator</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>2&nbsp;+&nbsp;3</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>actions&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculations</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«5␤»</span></span></span></div></pre><p>To make things better, we can use proto regexes that look like <code>:sym&lt;...&gt;</code> adverbs on tokens:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Calculator</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>calc</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>op</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>calc-op</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span class="keyword operator quantifiers regexp raku"><span>*</span></span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>calc-op</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>add</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>+</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>calc-op</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>sub</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>-</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>num</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Calculations</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TOP</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>calc-op</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>calc-op</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>add</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;[</span><span class="keyword operator generic raku"><span>+</span></span><span>]&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>num</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>calc-op</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>sub</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;[-]&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>num</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculator</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>2&nbsp;+&nbsp;3</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>actions&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculations</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«5␤»</span></span></span></div></pre><p>In this grammar the alternation has now been replaced with <code>&lt;calc-op&gt;</code>, which is essentially the name of a group of values we&#39;ll create. We do so by defining a rule prototype with <code>proto rule calc-op</code>. Each of our previous alternations have been replaced by a new <code>rule calc-op</code> definition and the name of the alternation is attached with <code>:sym&lt;&gt;</code> adverb.</p>
<p>In the class that declares actions, we now got rid of the ternary operator and simply take the <code>.made</code> value from the <code>$&lt;calc-op&gt;</code> match object. And the actions for individual alternations now follow the same naming pattern as in the grammar: <code>method calc-op:sym&lt;add&gt;</code> and <code>method calc-op:sym&lt;sub&gt;</code>.</p>
<p>The real beauty of this method can be seen when you subclass the grammar and action classes. Let&#39;s say we want to add a multiplication feature to the calculator:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>BetterCalculator</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculator</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>calc-op</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>mult</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>*</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>num</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>BetterCalculations</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Calculations</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>calc-op</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>mult</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;[</span><span class="constant language whatever hack raku"><span>*</span></span><span>]&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>num</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>BetterCalculator</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>2&nbsp;*&nbsp;3</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>actions&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>BetterCalculations</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«6␤»</span><span>&nbsp;</span></span></span></div></pre><p>All we had to add are an additional rule and action to the <code>calc-op</code> group and the thing works—all thanks to proto regexes.</p>
<h2 id="Special_tokens"><a class="u" href="#___top" title="go to top of document">Special tokens</a></h2>
<h3 id="TOP"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-TOP-TOP"><span class="index-entry"><code>TOP</code></span></a></a></h3>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>The <code>TOP</code> token is the default first token attempted to match when parsing with a grammar. Note that if you&#39;re parsing with the <a href="/type/Grammar#method_parse"><code>.parse</code></a> method, <code>token TOP</code> is automatically anchored to the start and end of the string. If you don&#39;t want to parse the whole string, look up <a href="/type/Grammar#method_subparse"><code>.subparse</code></a>.</p>
<p>Using <code>rule TOP</code> or <code>regex TOP</code> is also acceptable.</p>
<p>A different token can be chosen to be matched first using the <code>:rule</code> named argument to <code>.parse</code>, <code>.subparse</code>, or <code>.parsefile</code>. These are all <code>Grammar</code> methods.</p>
<p><a name="index-entry-ws"></a></p>
<h3 id="ws"><a class="u" href="#___top" title="go to top of document"><code>ws</code></a></h3>
<p>The default <code>ws</code> matches zero or more whitespace characters, as long as that point is not within a word (in code form, that&#39;s <code>regex ws { &lt;!ww&gt; \s* }</code>):</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;First&nbsp;&lt;.ws&gt;&nbsp;matches&nbsp;word&nbsp;boundary&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;and&nbsp;second&nbsp;&lt;.ws&gt;&nbsp;matches&nbsp;the&nbsp;whitespace&nbsp;between&nbsp;&#39;b&#39;&nbsp;and&nbsp;&#39;c&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>ab&nbsp;&nbsp;&nbsp;c</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;ab&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;c&nbsp;</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢ab&nbsp;&nbsp;&nbsp;c｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Failed&nbsp;match:&nbsp;there&nbsp;is&nbsp;neither&nbsp;any&nbsp;whitespace&nbsp;nor&nbsp;a&nbsp;word</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;boundary&nbsp;between&nbsp;&#39;a&#39;&nbsp;and&nbsp;&#39;b&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>ab</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span class="keyword operator quantifiers regexp raku"><span>.</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;b</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Successful&nbsp;match:&nbsp;there&nbsp;is&nbsp;a&nbsp;word&nbsp;boundary&nbsp;between&nbsp;&#39;)&#39;&nbsp;and&nbsp;&#39;b&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>)b</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span class="keyword operator quantifiers regexp raku"><span>.</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;b</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢)b｣␤»</span></span></span></div></pre><p>Please bear in mind that we&#39;re preceding <code>ws</code> with a dot to avoid capturing, which we are not interested in. Since in general whitespace is a separator, this is how it&#39;s mostly found.</p>
<p>When <code>rule</code> is used instead of <code>token</code>, <code>:sigspace</code> is enabled by default and any whitespace after terms and closing parenthesis/brackets are turned into a non-capturing call to <code>ws</code>, written as <code>&lt;.ws&gt;</code> where <code>.</code> means non-capturing. That is to say:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>entry</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>key</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>value</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></div></pre><p>Is the same as:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>entry</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>key</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>value</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></div></pre><p>You can also redefine the default <code>ws</code> token:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>4&nbsp;&nbsp;&nbsp;</span><span class="constant character escape raku"><span>\n</span><span>\n</span></span><span>&nbsp;5</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Succeeds</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Bar</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>ws</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\h</span></span><span class="keyword operator quantifiers regexp raku"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>4&nbsp;&nbsp;&nbsp;</span><span class="constant character escape raku"><span>\n</span><span>\n</span></span><span>&nbsp;5</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Fails</span></span></span></div></pre><p>And even capture it, but you need to use it explicitly. Notice that in the next example we use <code>token</code> instead of <code>rule</code>, as the latter would cause whitespace to be consumed by the implicit non-capturing <code>.ws</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span class="constant character escape class regexp raku"><span>\d</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>ws</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>parsed</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>3&nbsp;3</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>parsed</span></span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>ws</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢&nbsp;｣␤»</span><span>&nbsp;</span></span></span></div></pre><h3 id="sym"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-<sym>-sym"><span class="index-entry"><code>sym</code></span></a></a></h3>
<p>The <code>&lt;sym&gt;</code> token can be used inside proto regexes to match the string value of the <code>:sym</code> adverb for that particular regex:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>letter</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span class="keyword operator quantifiers regexp raku"><span>*</span></span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>R</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>sym</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>a</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>sym</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>k</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>sym</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>u</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>sym</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>letter</span></span><span class="meta regexp named adverb raku"><span class="punctuation definition regexp adverb raku"><span>:</span></span><span class="support type class adverb raku"><span>sym</span></span></span><span>&lt;</span><span class="string array words raku"><span>*</span></span><span>&gt;</span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword operator quantifiers regexp raku"><span>.</span></span><span>&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>I&nbsp;♥&nbsp;Raku</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>actions&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>class</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TOP</span></span><span>(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>letter</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>grep</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span><span>.</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>sym</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>say</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Raku␤»</span></span></span></div></pre><p>This comes in handy when you&#39;re already differentiating the proto regexes with the strings you&#39;re going to match, as using <code>&lt;sym&gt;</code> token prevents repetition of those strings.</p>
<p><a name="index-entry-<?>"></a></p>
<h3 id="&quot;Always_succeed&quot;_assertion"><a class="u" href="#___top" title="go to top of document">&quot;Always succeed&quot; assertion</a></h3>
<p>The <code>&lt;?&gt;</code> is the <em>always succeed</em> assertion. When used as a grammar token, it can be used to trigger an Action class method. In the following grammar we look for Arabic digits and define a <code>succ</code> token with the always succeed assertion.</p>
<p>In the action class, we use calls to the <code>succ</code> method to do set up (in this case, we prepare a new element in <code>@!numbers</code>). In the <code>digit</code> method, we use the Arabic digit as an index into a list of Devanagari digits and add it to the last element of <code>@!numbers</code>. Thanks to <code>succ</code>, the last element will always be the number for the currently parsed <code>digit</code> digits.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Digifier</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.succ</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>digit</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;]</span><span class="keyword operator quantifiers regexp raku"><span>+</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>succ</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span>?</span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>digit</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator charclass open regexp raku"><span>[</span></span><span class="constant character custom property regexp raku"><span>0..9</span></span><span class="keyword operator charclass close regexp raku"><span>]</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Devanagari</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>digit</span></span><span>&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>tail</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>०&nbsp;&nbsp;१&nbsp;&nbsp;२&nbsp;&nbsp;३&nbsp;&nbsp;४&nbsp;&nbsp;५&nbsp;&nbsp;६&nbsp;&nbsp;७&nbsp;&nbsp;८&nbsp;&nbsp;९</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>[</span><span class="keyword other special-method raku"><span>$/</span></span><span>]&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>succ</span></span><span>&nbsp;&nbsp;($)&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>push</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TOP</span></span><span>&nbsp;&nbsp;&nbsp;(</span><span class="keyword other special-method raku"><span>$/</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol regex raku"><span>make</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>[</span><span class="keyword operator generic raku"><span>^</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span></span><span class="constant numeric raku"><span>-1</span></span><span>)]&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Digifier</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>255&nbsp;435&nbsp;777</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>actions&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>Devanagari</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword control flowcontrol regex raku"><span>made</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(२५५&nbsp;४३५&nbsp;७७७)␤»</span></span></span></div></pre><h2 id="Methods_in_grammars"><a class="u" href="#___top" title="go to top of document">Methods in grammars</a></h2>
<p>It&#39;s fine to use methods instead of rules or tokens in a grammar, as long as they return a <a href="/type/Match">Match</a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>DigitMatcher</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TOP</span></span><span>&nbsp;(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>full-unicode</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>full-unicode</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>num</span></span><span>-</span><span class="routine name raku"><span>full</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>num</span></span><span>-</span><span class="routine name raku"><span>basic</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>num-full</span></span><span>&nbsp;&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\d</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>num-basic</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator charclass open regexp raku"><span>[</span></span><span class="constant character custom property regexp raku"><span>0..9</span></span><span class="keyword operator charclass close regexp raku"><span>]</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>The grammar above will attempt different matches depending on the argument provided to the subparse methods:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span class="routine name raku"><span>DigitMatcher</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>12७१७९०९</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>args&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;\(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>full-unicode</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«12717909␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span class="routine name raku"><span>DigitMatcher</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>12७१७९०९</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>args&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;\(</span><span class="keyword operator generic raku"><span>:</span><span>!</span></span><span class="routine name raku"><span>full-unicode</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«12␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Dynamic_variables_in_grammars"><a class="u" href="#___top" title="go to top of document">Dynamic variables in grammars</a></h2>
<p>Variables can be defined in tokens by prefixing the lines of code defining them with <code>:</code>. Arbitrary code can be embedded anywhere in a token by surrounding it with curly braces. This is useful for keeping state between tokens, which can be used to alter how the grammar will parse text. Using dynamic variables (variables with <code>$*</code>, <code>@*</code>, <code>&amp;*</code>, <code>%*</code> twigils) in tokens cascades down through <em>all</em> tokens defined thereafter within the one where it&#39;s defined, avoiding having to pass them from token to token as arguments.</p>
<p>One use for dynamic variables is guards for matches. This example uses guards to explain which regex classes parse whitespace literally:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>GrammarAdvice</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name section adverb raku"><span>:my</span></span><span>&nbsp;Int&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>*</span></span><span>USE-WS</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>use</span><span>&quot;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>type</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>for</span><span>&quot;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>significance</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>whitespace&nbsp;by&nbsp;default</span><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>type</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>rules</span><span>&quot;</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>USE-WS</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>tokens</span><span>&quot;</span></span><span>&nbsp;&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>USE-WS</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>regexes</span><span>&quot;</span></span><span>&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>USE-WS</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>significance</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>&lt;?{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>USE-WS</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>significant</span><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>&lt;?{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>USE-WS</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>insignificant</span><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Here, text such as &quot;use rules for significant whitespace by default&quot; will only match if the state assigned by whether rules, tokens, or regexes are mentioned matches with the correct guard:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>GrammarAdvice</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>use&nbsp;rules&nbsp;for&nbsp;significant&nbsp;whitespace&nbsp;by&nbsp;default</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«use&nbsp;rules&nbsp;for&nbsp;significant&nbsp;whitespace&nbsp;by&nbsp;default»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>GrammarAdvice</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>use&nbsp;tokens&nbsp;for&nbsp;insignificant&nbsp;whitespace&nbsp;by&nbsp;default</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«use&nbsp;tokens&nbsp;for&nbsp;insignificant&nbsp;whitespace&nbsp;by&nbsp;default»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>GrammarAdvice</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>use&nbsp;regexes&nbsp;for&nbsp;insignificant&nbsp;whitespace&nbsp;by&nbsp;default</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«use&nbsp;regexes&nbsp;for&nbsp;insignificant&nbsp;whitespace&nbsp;by&nbsp;default»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>GrammarAdvice</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subparse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>use&nbsp;regexes&nbsp;for&nbsp;significant&nbsp;whitespace&nbsp;by&nbsp;default</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;#&lt;failed&nbsp;match&gt;</span><span>&nbsp;</span></span></span></div></pre><h2 id="Attributes_in_grammars"><a class="u" href="#___top" title="go to top of document">Attributes in grammars</a></h2>
<p>Attributes may be defined in grammars. However, they can only be accessed by methods. Attempting to use them from within a token will throw an exception because tokens are methods of <a href="/type/Match">Match</a>, not of the grammar itself. Note that mutating an attribute from within a method called in a token will <em>only modify the attribute for that token&#39;s own match object</em>! Grammar attributes can be accessed in the match returned after parsing if made public:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>HTTPRequest</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>invalid</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>type</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ns</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>path</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ns</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>HTTP/1.1</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.crlf</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>field</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.crlf</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;]</span><span class="keyword operator quantifiers regexp raku"><span>+</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.crlf</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>body</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>=</span><span class="keyword operator quantifiers regexp raku"><span>.</span><span>*</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>type</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;[&nbsp;GET&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;POST&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;OPTIONS&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;HEAD&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;PUT&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;DELETE&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;TRACE&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;CONNECT&nbsp;]&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.accept</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="keyword operator charclass open regexp raku"><span>[</span></span><span class="constant character custom property regexp raku"><span>\/</span></span><span class="keyword operator charclass close regexp raku"><span>]</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.error</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>path</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>/</span><span>&#39;</span></span><span>&nbsp;[[</span><span class="constant character escape class regexp raku"><span>\w</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>]</span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp raku"><span>%</span></span><span>&nbsp;\/]&nbsp;[\</span><span class="keyword operator quantifiers regexp raku"><span>.</span></span><span class="constant character escape class regexp raku"><span>\w</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>]</span><span class="keyword operator quantifiers regexp raku"><span>?</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.accept</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>*</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.accept</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="constant character escape class regexp raku"><span>\S</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.error</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>field</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>name</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>=</span><span class="constant character escape class regexp raku"><span>\w</span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ns</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>:</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.ns</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;</span><span class="meta match variable raku"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp raku"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>value</span></span><span class="support class match name delimiter regexp raku"><span>&gt;</span></span></span><span>=</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>crlf</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>*</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.accept</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>crlf</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="comment suppressed capture property regexp raku"><span>.error</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>error</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;::</span><span class="keyword operator generic raku"><span>?</span></span><span class="routine name raku"><span>CLASS</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>invalid</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language raku"><span>self</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>accept</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;::</span><span class="keyword operator generic raku"><span>?</span></span><span class="routine name raku"><span>CLASS</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>invalid</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language raku"><span>self</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>crlf</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;network&nbsp;new&nbsp;line&nbsp;(usually&nbsp;seen&nbsp;as&nbsp;&quot;\r\n&quot;)</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Several&nbsp;internet&nbsp;protocols&nbsp;(such&nbsp;as&nbsp;HTTP,&nbsp;RF&nbsp;2616)&nbsp;mandate</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;the&nbsp;use&nbsp;of&nbsp;ASCII&nbsp;CR+LF&nbsp;(0x0D&nbsp;0x0A)&nbsp;to&nbsp;terminate&nbsp;lines&nbsp;at</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;the&nbsp;protocol&nbsp;level&nbsp;(even&nbsp;though,&nbsp;in&nbsp;practice,&nbsp;some&nbsp;applications</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;tolerate&nbsp;a&nbsp;single&nbsp;LF).</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Raku,&nbsp;Raku&nbsp;grammars&nbsp;and&nbsp;strings&nbsp;(Str)&nbsp;adhere&nbsp;to&nbsp;Unicode</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;conformance.&nbsp;Thus,&nbsp;CR+LF&nbsp;cannot&nbsp;be&nbsp;expressed&nbsp;unambiguously</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;as&nbsp;\r\n&nbsp;in&nbsp;in&nbsp;Raku&nbsp;grammars&nbsp;or&nbsp;strings&nbsp;(Str),&nbsp;as&nbsp;Unicode</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;conformance&nbsp;requires&nbsp;\r\n&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;\n&nbsp;alone.</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation hex raku"><span class="keyword punctuation hex raku"><span>\x</span></span><span class="keyword operator bracket open raku"><span>[</span></span><span class="routine name hex raku"><span>0d</span></span><span class="keyword operator bracket close raku"><span>]</span></span></span><span>&nbsp;</span><span class="punctuation hex raku"><span class="keyword punctuation hex raku"><span>\x</span></span><span class="keyword operator bracket open raku"><span>[</span></span><span class="routine name hex raku"><span>0a</span></span><span class="keyword operator bracket close raku"><span>]</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>ns</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;network&nbsp;space</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&lt;ws&gt;&nbsp;would&nbsp;consume,&nbsp;e.g.,&nbsp;newlines,&nbsp;and&nbsp;\h&nbsp;(and&nbsp;\s)&nbsp;would&nbsp;accept</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;more&nbsp;codepoints&nbsp;than&nbsp;just&nbsp;ASCII&nbsp;single&nbsp;space&nbsp;and&nbsp;the&nbsp;tab&nbsp;character.</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span class="string literal raku"><span>&#39;</span><span>&nbsp;</span><span>&#39;</span></span><span>&nbsp;</span><span class="support function alternation regexp raku"><span>|</span></span><span>&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator charclass open regexp raku"><span>[</span></span><span class="constant character custom property regexp raku"><span>\t</span></span><span class="keyword operator charclass close regexp raku"><span>]</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span><span>&nbsp;]</span><span class="keyword operator quantifiers regexp raku"><span>*</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>crlf</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="punctuation hex raku"><span class="keyword punctuation hex raku"><span>\x</span></span><span class="keyword operator bracket open raku"><span>[</span></span><span class="routine name hex raku"><span>0d</span></span><span class="keyword operator bracket close raku"><span>]</span></span><span class="keyword punctuation hex raku"><span>\x</span></span><span class="keyword operator bracket open raku"><span>[</span></span><span class="routine name hex raku"><span>0a</span></span><span class="keyword operator bracket close raku"><span>]</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>header</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>GOT&nbsp;/index.html&nbsp;HTTP/1.1</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>crlf</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>Host:&nbsp;docs.raku.org</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>crlf</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>crlf</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>body</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>HTTPRequest</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>header</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>type(</span><span class="constant character escape raku"><span>\&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>m</span></span><span>.&lt;type&gt;</span><span class="constant character escape raku"><span>\&quot;</span></span><span>)=</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>type</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>invalid</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;type(&quot;GOT&nbsp;&quot;)=True</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>path(</span><span class="constant character escape raku"><span>\&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>m</span></span><span>.&lt;path&gt;</span><span class="constant character escape raku"><span>\&quot;</span></span><span>)=</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>path</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>invalid</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;path(&quot;/index.html&quot;)=False</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>field(</span><span class="constant character escape raku"><span>\&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>m</span></span><span>.&lt;field&gt;[0]</span><span class="constant character escape raku"><span>\&quot;</span></span><span>)=</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>field</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>[</span><span class="constant numeric raku"><span>0</span></span><span>]</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>invalid</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;field(&quot;Host:&nbsp;docs.raku.org&quot;)=False</span><span>&nbsp;</span></span></span></div></pre><p>Notes: <code>$crlf</code> and token <code>&lt;.crlf&gt;</code> are required if we want to somehow (within the context of this incomplete example) strictly adhere to HTTP/1.1 (RFC 2616). The reason is that Raku, in contrast to RFC 2616, is Unicode conformant, and \r\n needs to be interpreted as a sole \n, thus preventing the grammar to properly parse a string containing \r\n in the sense expected by the HTTP protocol. Notice how attribute <code>invalid</code> is local to each component (e.g., the value for <code>&lt;type&gt;</code> is <code>True</code>, but for <code>&lt;path&gt;</code> is <code>False</code>). Notice also how we have a method for <code>accept</code>, the reason being that attribute <code>invalid</code> would be uninitialized (even if present) otherwise.</p>
<h2 id="Passing_arguments_into_grammars"><a class="u" href="#___top" title="go to top of document">Passing arguments into grammars</a></h2>
<p>To pass arguments into a grammar, you can use the named argument of <code>:args</code> on any of the parsing methods of grammar. The arguments passed should be in a <code>list</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>demonstrate-arguments</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named signature raku"><span class="punctuation definition regexp named signature perlfe"><span>(</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>word</span></span></span><span class="punctuation definition regexp named signature perlfe"><span>)</span></span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>I&nbsp;like</span><span>&quot;</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>word</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Notice&nbsp;the&nbsp;comma&nbsp;after&nbsp;&quot;sweets&quot;&nbsp;when&nbsp;passed&nbsp;to&nbsp;:args&nbsp;to&nbsp;coerce&nbsp;it&nbsp;to&nbsp;a&nbsp;list</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>demonstrate-arguments</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>I&nbsp;like&nbsp;sweets</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>args</span></span><span>((</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>sweets</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,)));</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢I&nbsp;like&nbsp;sweets｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Once the arguments are passed in, they can be used in a call to a named regex inside the grammar.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>demonstrate-arguments-again</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named signature raku"><span class="punctuation definition regexp named signature perlfe"><span>(</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>word</span></span></span><span class="punctuation definition regexp named signature perlfe"><span>)</span></span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>phrase</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>stem</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>added</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>word</span></span><span class="meta rule signature raku"><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>word</span></span></span><span>)</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>phrase-stem</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>I&nbsp;like</span><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>added-word</span></span><span class="meta regexp named signature raku"><span class="punctuation definition regexp named signature perlfe"><span>(</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>passed-word</span></span></span><span class="punctuation definition regexp named signature perlfe"><span>)</span></span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>passed-word</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>demonstrate-arguments-again</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>I&nbsp;like&nbsp;vegetables</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>args</span></span><span>((</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>vegetables</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,)));</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢I&nbsp;like&nbsp;vegetables｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;&nbsp;«phrase-stem&nbsp;=&gt;&nbsp;｢I&nbsp;like&nbsp;｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;&nbsp;«added-word&nbsp;=&gt;&nbsp;｢vegetables｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Alternatively, you can initialize dynamic variables and use any arguments that way within the grammar.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>demonstrate-arguments-dynamic</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP raku"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named signature raku"><span class="punctuation definition regexp named signature perlfe"><span>(</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>word</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>extra</span></span></span><span class="punctuation definition regexp named signature perlfe"><span>)</span></span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>phrase</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>stem</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span><span>&lt;</span></span><span class="variable other identifier regexname raku"><span>added</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>words</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>phrase-stem</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal raku"><span>&quot;</span><span>I&nbsp;like</span><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named raku"><span class="storage type declare regexp named raku"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named raku"><span>added-words</span></span><span>&nbsp;</span><span class="meta regexp named block raku"><span class="punctuation definition regex named raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>*</span></span><span>word</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>*</span></span><span>extra</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta regexp named raku"><span class="meta regexp named block raku"><span>&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>demonstrate-arguments-dynamic</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>parse</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>I&nbsp;like&nbsp;everything&nbsp;else</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>args</span></span><span>((</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>everything</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>else</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)));</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢I&nbsp;like&nbsp;everything&nbsp;else｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;&nbsp;«phrase-stem&nbsp;=&gt;&nbsp;｢I&nbsp;like&nbsp;｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;&nbsp;«added-words&nbsp;=&gt;&nbsp;｢everything&nbsp;else｣␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-Actions"></a></p>

        </div>
    </div>

    <aside><ol start="1">
<li><a href="#fn-ref-1" id="fn-1">[↑]</a> They are actually a special kind of class, but for the rest of the section, they behave in the same way as a <em>normal</em> class would </li>
</ol></aside>

    <footer class="pretty-box yellow">
        <p style="display:none;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//">https://github.com/Raku/doc/edit/master/doc//</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="/js/app.js?v=1"></script>
    <script type="text/javascript" src="/js/search.js?v=3"></script>
</body>
</html>
