<!doctype html>
<html lang="en">
<head>
    <title>class Proc::Async</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="/">
            <img src="/images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="/language.html"> Language </a>
                    <a class="menu-item selected darker-green" href="/type.html"> Types </a>
                    <a class="menu-item " href="/routine.html"> Routines </a>
                    <a class="menu-item " href="/programs.html"> Programs </a>
                    <a class="menu-item " href="https://webchat.freenode.net/?channels=#raku"> Chat with us </a>
            </div>

            <div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green">
                    <a class="menu-item" href="/type.html"> All </a>
                    <a class="menu-item" href="/type-basic.html"> Basic </a>
                    <a class="menu-item" href="/type-composite.html"> Composite </a>
                    <a class="menu-item" href="/type-domain-specific.html"> Domain-specific </a>
                    <a class="menu-item" href="/type-exception.html"> Exceptions </a>
            </div></div></div></div></div>

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/tree/master/doc/Type/Proc/Async.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">class Proc::Async</h1>
        <p class="subtitle">Running process (asynchronous interface)</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#method_new">method new</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="#method_stdout">method stdout</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="#method_stderr">method stderr</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.4</td><td class="toc-text"><a href="#method_bind-stdin">method bind-stdin</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.5</td><td class="toc-text"><a href="#method_bind-stdout">method bind-stdout</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.6</td><td class="toc-text"><a href="#method_bind-stderr">method bind-stderr</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.7</td><td class="toc-text"><a href="#method_w">method w</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.8</td><td class="toc-text"><a href="#method_start">method start</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.9</td><td class="toc-text"><a href="#method_started">method started</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.10</td><td class="toc-text"><a href="#method_ready">method ready</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.11</td><td class="toc-text"><a href="#method_pid">method pid</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.12</td><td class="toc-text"><a href="#method_path">method path</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.13</td><td class="toc-text"><a href="#method_args">method args</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.14</td><td class="toc-text"><a href="#method_command">method command</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.15</td><td class="toc-text"><a href="#method_write">method write</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.16</td><td class="toc-text"><a href="#method_print">method print</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.17</td><td class="toc-text"><a href="#method_method_put">method method put</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.18</td><td class="toc-text"><a href="#method_say">method say</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.19</td><td class="toc-text"><a href="#method_Supply">method Supply</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.20</td><td class="toc-text"><a href="#method_close-stdin">method close-stdin</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.21</td><td class="toc-text"><a href="#method_kill">method kill</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#Type_Graph">Type Graph</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Proc::Async</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div></pre><p><code>Proc::Async</code> allows you to run external commands asynchronously, capturing standard output and error handles, and optionally write to its standard input.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>file</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>foo</span><span class="punctuation definition string end raku"><span>’</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>spurt</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>file</span></span></span><span>,&nbsp;</span><span class="string quoted left_double_right_double raku"><span class="punctuation definition string begin raku"><span>“</span></span><span>and</span><span class="constant character escape raku"><span>\n</span></span><span>Camelia</span><span class="constant character escape raku"><span>\n</span></span><span>♡</span><span class="constant character escape raku"><span>\n</span></span><span>me</span><span class="constant character escape raku"><span>\n</span></span><span class="punctuation definition string end raku"><span>”</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>w</span></span><span>,&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>tac</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>--</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>file</span></span></span><span>,&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>-</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;my&nbsp;$proc&nbsp;=&nbsp;Proc::Async.new:&nbsp;:w,&nbsp;‘sleep’,&nbsp;15;&nbsp;#&nbsp;uncomment&nbsp;to&nbsp;try&nbsp;timeouts</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stdout</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>lines</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;split&nbsp;input&nbsp;on&nbsp;\r\n,&nbsp;\n,&nbsp;and&nbsp;\r</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>line:&nbsp;</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stderr</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;chunks</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>stderr:&nbsp;</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ready</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>PID:&nbsp;</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Only&nbsp;in&nbsp;Rakudo&nbsp;2018.04&nbsp;and&nbsp;newer,&nbsp;otherwise&nbsp;Nil</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Proc&nbsp;finished:&nbsp;exitcode=</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>exitcode</span></span><span>,&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>&nbsp;signal=</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>signal</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>done</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;gracefully&nbsp;jump&nbsp;from&nbsp;the&nbsp;react&nbsp;block</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted left_double_right_double raku"><span class="punctuation definition string begin raku"><span>“</span></span><span>I</span><span class="constant character escape raku"><span>\n</span></span><span>♥</span><span class="constant character escape raku"><span>\n</span></span><span>Camelia</span><span class="constant character escape raku"><span>\n</span></span><span class="punctuation definition string end raku"><span>”</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>close-stdin</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="routine name raku"><span>signal</span></span><span>(</span><span class="routine name raku"><span>SIGTERM</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>merge</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>signal</span></span><span>(</span><span class="routine name raku"><span>SIGINT</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>once</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Signal&nbsp;received,&nbsp;asking&nbsp;the&nbsp;process&nbsp;to&nbsp;stop</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>kill</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;sends&nbsp;SIGHUP,&nbsp;change&nbsp;appropriately</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="routine name raku"><span>signal</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>zip</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>in</span></span><span>(</span><span class="constant numeric raku"><span>2</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Kill&nbsp;it!</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>kill</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>SIGKILL</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>in</span></span><span>(</span><span class="constant numeric raku"><span>5</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Timeout.&nbsp;Asking&nbsp;the&nbsp;process&nbsp;to&nbsp;stop</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>kill</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;sends&nbsp;SIGHUP,&nbsp;change&nbsp;appropriately</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>in</span></span><span>(</span><span class="constant numeric raku"><span>2</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Timeout.&nbsp;Forcing&nbsp;the&nbsp;process&nbsp;to&nbsp;stop</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>kill</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>SIGKILL</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single left_single_right_single raku"><span class="punctuation definition string begin raku"><span>‘</span></span><span>Program&nbsp;finished</span><span class="punctuation definition string end raku"><span>’</span></span></span><span>;</span></span></div></pre><p>Example above produces the following output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>me</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;♡</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>Camelia</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>and</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>Camelia</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;♥</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>line</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>I</span></span></span></div><div class="line"><span class="source raku"><span class="support type raku"><span>Proc</span></span><span>&nbsp;</span><span class="routine name raku"><span>finished</span></span><span class="keyword operator generic raku"><span>.</span></span><span>&nbsp;</span><span class="routine name raku"><span>Exit</span></span><span>&nbsp;</span><span class="routine name raku"><span>code</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Program</span></span><span>&nbsp;</span><span class="routine name raku"><span>finished</span></span></span></div></pre><p>Alternatively, you can use <code>Proc::Async</code> without using a <a href="/language/concurrency#index-entry-react">react</a> block:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;command&nbsp;with&nbsp;arguments</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>echo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;subscribe&nbsp;to&nbsp;new&nbsp;output&nbsp;from&nbsp;out&nbsp;and&nbsp;err&nbsp;handles:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stdout</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>tap</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>print</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Output:&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>v</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>quit&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>caught&nbsp;exception&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stderr</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>tap</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>print</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Error:&nbsp;&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>v</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Starting...</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;wait&nbsp;for&nbsp;the&nbsp;external&nbsp;program&nbsp;to&nbsp;terminate</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Done.</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div></pre><p>This produces the following output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>Starting</span></span><span class="keyword operator multi-symbol raku"><span>...</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Output</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>foo</span></span><span>&nbsp;</span><span class="routine name raku"><span>bar</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Done</span></span><span class="keyword operator generic raku"><span>.</span></span></span></div></pre><p>An example that opens an external program for writing:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>prog</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>w</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>hexdump</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>-C</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>prog</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>prog</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>write</span></span><span>(</span><span class="support type raku"><span>Buf</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="constant numeric raku"><span>12</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>));</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>prog</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>close-stdin</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>;</span></span></div></pre><p>An example of piping several commands like <code>echo &quot;Hello, world&quot; | cat -n</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-echo</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>echo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Hello,&nbsp;world</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-cat</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>cat</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>-n</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-cat</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>bind-stdin</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-echo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stdout</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-echo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc-cat</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><h1 id="Methods"><a class="u" href="#___top" title="go to top of document">Methods</a></h1>
<h2 id="method_new"><a class="u" href="#___top" title="go to top of document">method new</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span></span><span class="keyword other special-method raku"><span>@</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>path</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>args</span></span></span><span>),&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>w</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>enc</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>translate-nl</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>win-verbatim-args</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>started</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>path</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>args</span></span></span><span>,&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>w</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>enc</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>translate-nl</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>win-verbatim-args</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>started</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Creates a new <code>Proc::Async</code> object with external program name or path <code>$path</code> and the command line arguments <code>@args</code>.</p>
<p>If <code>:w</code> is passed to <code>new</code>, then a pipe to the external program&#39;s standard input stream (<code>stdin</code>) is opened, to which you can write with <code>write</code> and <code>say</code>.</p>
<p>The <code>:enc</code> specifies <a href="/type/IO::Handle#method_encoding">the encoding</a> for streams (can still be overridden in individual methods) and defaults to <code>utf8</code>.</p>
<p>If <code>:translate-nl</code> is set to <code>True</code> (default value), OS-specific newline terminators (e.g. <code>\r\n</code> on Windows) will be automatically translated to <code>\n</code>.</p>
<p>The <code>:started</code> attribute is set by default to <code>False</code>, so that you need to start the command afterwards using <a href="/type/Proc::Async#method_start"><code>.start</code></a>. You probably don&#39;t want to do this if you want to bind any of the handlers, but it&#39;s OK if you just need to start a external program immediately.</p>
<p>On Windows the flag <code>$win-verbatim-args</code> disables all automatic quoting of process arguments. See <a href="https://docs.microsoft.com/en-us/archive/blogs/twistylittlepassagesallalike/everyone-quotes-command-line-arguments-the-wrong-way">this blog</a> for more information on windows command quoting. The flag is ignored on all other platforms. The flag was introduced in Rakudo version 2020.06 and is not present in older releases. By default, it&#39;s set to <code>False</code>, in which case arguments will be quoted according to Microsoft convention.</p>
<h2 id="method_stdout"><a class="u" href="#___top" title="go to top of document">method stdout</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>stdout</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bin</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Supply</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Returns the <a href="/type/Supply">Supply</a> for the external program&#39;s standard output stream. If <code>:bin</code> is passed, the standard output is passed along in binary as <a href="/type/Blob">Blob</a>, otherwise it is interpreted as UTF-8, decoded, and passed along as <a href="/type/Str">Str</a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>r</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>echo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Raku</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stdout</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>tap</span></span><span>(&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Got&nbsp;output&nbsp;&#39;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>str</span></span><span>&#39;&nbsp;from&nbsp;the&nbsp;external&nbsp;program</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>;</span></span></div></pre><p>You must call <code>stdout</code> before you call <a href="/type/Proc::Async#method_start"><code>.start</code></a>. Otherwise an exception of class <a href="/type/X::Proc::Async::TapBeforeSpawn">X::Proc::Async::TapBeforeSpawn</a> is thrown.</p>
<p>If <code>stdout</code> is not called, the external program&#39;s standard output is not captured at all.</p>
<p>Note that you cannot call <code>stdout</code> both with and without <code>:bin</code> on the same object; it will throw an exception of type <a href="/type/X::Proc::Async::CharsOrBytes">X::Proc::Async::CharsOrBytes</a> if you try.</p>
<p>Use <a href="/type/Proc::Async#method_Supply"><code>.Supply</code></a> for merged STDOUT and STDERR.</p>
<h2 id="method_stderr"><a class="u" href="#___top" title="go to top of document">method stderr</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>stderr</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bin</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Supply</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Returns the <a href="/type/Supply">Supply</a> for the external program&#39;s standard error stream. If <code>:bin</code> is passed, the standard error is passed along in binary as <a href="/type/Blob">Blob</a>, otherwise it is interpreted as UTF-8, decoded, and passed along as <a href="/type/Str">Str</a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>r</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>echo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Raku</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>stderr</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>tap</span></span><span>(&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Got&nbsp;error&nbsp;&#39;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>str</span></span><span>&#39;&nbsp;from&nbsp;the&nbsp;external&nbsp;program</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>proc</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>;</span></span></div></pre><p>You must call <code>stderr</code> before you call <a href="/type/Proc::Async#method_start"><code>.start</code></a>. Otherwise an exception of class <a href="/type/X::Proc::Async::TapBeforeSpawn">X::Proc::Async::TapBeforeSpawn</a> is thrown.</p>
<p>If <code>stderr</code> is not called, the external program&#39;s standard error stream is not captured at all.</p>
<p>Note that you cannot call <code>stderr</code> both with and without <code>:bin</code> on the same object; it will throw an exception of type <a href="/type/X::Proc::Async::CharsOrBytes">X::Proc::Async::CharsOrBytes</a> if you try.</p>
<p>Use <a href="/type/Proc::Async#method_Supply"><code>.Supply</code></a> for merged STDOUT and STDERR.</p>
<h2 id="method_bind-stdin"><a class="u" href="#___top" title="go to top of document">method bind-stdin</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bind-stdin</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Handle</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>handle</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bind-stdin</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span>::</span><span class="routine name raku"><span>Pipe</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>pipe</span></span></span><span>)</span></span></div></pre><p>Sets a handle (which must be opened) or a <code>Pipe</code> as a source of <code>STDIN</code>. The <code>STDIN</code> of the target process must be writable or <a href="/type/X::Proc::Async::BindOrUse">X::Proc::Async::BindOrUse</a> will be thrown.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>cat</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>in</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>/etc/profile</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>open</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>bind-stdin</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><p>This is equivalent to</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>cat</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&lt;</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>etc</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>profile</span></span></span></div></pre><p>and will print the content of <code>/etc/profile</code> to standard output.</p>
<h2 id="method_bind-stdout"><a class="u" href="#___top" title="go to top of document">method bind-stdout</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bind-stdout</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Handle</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>handle</span></span></span><span>)</span></span></div></pre><p>Redirects STDOUT of the target process to a handle (which must be opened). If STDOUT is closed <a href="/type/X::Proc::Async::BindOrUse">X::Proc::Async::BindOrUse</a> will be thrown.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ls</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>out</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ls.out</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>open</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>w</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>bind-stdout</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><p>This program will pipe the output of the <code>ls</code> shell command to a file called <code>ls.out</code>, which we are opened for reading.</p>
<h2 id="method_bind-stderr"><a class="u" href="#___top" title="go to top of document">method bind-stderr</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bind-stderr</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Handle</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>handle</span></span></span><span>)</span></span></div></pre><p>Redirects <code>STDERR</code> of the target process to a handle (which must be opened). If <code>STDERR</code> is closed <a href="/type/X::Proc::Async::BindOrUse">X::Proc::Async::BindOrUse</a> will be thrown.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ls</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>--foo</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>err</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ls.err</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>open</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>w</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>bind-stderr</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>h</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><h2 id="method_w"><a class="u" href="#___top" title="go to top of document">method w</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>w</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>)</span></span></div></pre><p>Returns a true value if <code>:w</code> was passed to the constructor, that is, if the external program is started with its input stream made available to output to the program through the <code>.print</code>, <code>.say</code> and <code>.write</code> methods.</p>
<h2 id="method_start"><a class="u" href="#___top" title="go to top of document">method start</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>start</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>scheduler</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>SCHEDULER</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>ENV</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cwd</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>CWD</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>Initiates spawning of the external program. Returns a <a href="/type/Promise">Promise</a> that will be kept with a <a href="/type/Proc">Proc</a> object once the external program exits or broken if the program cannot be started. Optionally, you can use a scheduler instead of the default <code>$*SCHEDULER</code>, or change the environment the process is going to run in via the named argument <code>:$ENV</code> or the directory via the named argument <code>:$cwd</code>.</p>
<p>If <code>start</code> is called on a Proc::Async object on which it has already been called before, an exception of <a href="/type/X::Proc::Async::AlreadyStarted">type X::Proc::Async::AlreadyStarted</a> is thrown.</p>
<p>Note: If you wish to <code>await</code> the Promise and discard its result, using</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control control-handlers raku"><span>try</span></span><span>&nbsp;</span><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><p><strong>will throw</strong> if the program exited with non-zero status, as the <code>Proc</code> returned as the result of the Promise throws when sunk and in this case it will get sunk outside the <code>try</code>. To avoid that, sink it yourself <em>inside</em> the <code>try</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control control-handlers raku"><span>try</span></span><span>&nbsp;</span><span class="routine name raku"><span>sink</span></span><span>&nbsp;</span><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>;</span></span></div></pre><h2 id="method_started"><a class="u" href="#___top" title="go to top of document">method started</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>started</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Returns <code>False</code> before <code>.start</code> has been called, and <code>True</code> afterwards.</p>
<h2 id="method_ready"><a class="u" href="#___top" title="go to top of document">method ready</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>ready</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Returns a <a href="/type/Promise">Promise</a> that will be kept once the process has successfully started. <a href="/type/Promise">Promise</a> will be broken if the program fails to start.</p>
<p><strong>Implementation-specific note:</strong> Starting from Rakudo 2018.04, the returned promise will hold the process id (PID).</p>
<h2 id="method_pid"><a class="u" href="#___top" title="go to top of document">method pid</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>pid</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Equivalent to <a href="/routine/ready">ready</a>.</p>
<p>Returns a <a href="/type/Promise">Promise</a> that will be kept once the process has successfully started. <a href="/type/Promise">Promise</a> will be broken if the program fails to start. Returned promise will hold the process id (PID).</p>
<p><strong>Implementation-specific note:</strong> Available starting from Rakudo 2018.04.</p>
<h2 id="method_path"><a class="u" href="#___top" title="go to top of document">method path</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>path</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>)</span></span></div></pre><p><strong>Deprecated as of v6.d</strong>. Use <a href="/routine/command">command</a> instead.</p>
<p>Returns the name and/or path of the external program that was passed to the <code>new</code> method as first argument.</p>
<h2 id="method_args"><a class="u" href="#___top" title="go to top of document">method args</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>args</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Positional</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p><strong>Deprecated as of v6.d</strong>. Use <a href="/routine/command">command</a> instead.</p>
<p>Returns the command line arguments for the external programs, as passed to the <code>new</code> method.</p>
<h2 id="method_command"><a class="u" href="#___top" title="go to top of document">method command</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>command</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>List</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p><em>Available as of v6.d.</em></p>
<p>Returns the command and arguments used for this <code>Proc::Async</code> object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>cat</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>some</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>files</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>command</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>say</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(cat&nbsp;some&nbsp;files)␤»</span></span></span></div></pre><h2 id="method_write"><a class="u" href="#___top" title="go to top of document">method write</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>write</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Blob</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>scheduler</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>SCHEDULER</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)</span></span></div></pre><p>Write the binary data in <code>$b</code> to the standard input stream of the external program.</p>
<p>Returns a <a href="/type/Promise">Promise</a> that will be kept once the data has fully landed in the input buffer of the external program.</p>
<p>The <code>Proc::Async</code> object must be created for writing (with <code>Proc::Async.new(:w, $path, @args)</code>). Otherwise an <a href="/type/X::Proc::Async::OpenForWriting">X::Proc::Async::OpenForWriting</a> exception will the thrown.</p>
<p><code>start</code> must have been called before calling method write, otherwise an <a href="/type/X::Proc::Async::MustBeStarted">X::Proc::Async::MustBeStarted</a> exception is thrown.</p>
<h2 id="method_print"><a class="u" href="#___top" title="go to top of document">method print</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>print</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>scheduler</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>SCHEDULER</span></span></span><span>)</span></span></div></pre><p>Write the text data in <code>$str</code> to the standard input stream of the external program, encoding it as UTF-8.</p>
<p>Returns a <a href="/type/Promise">Promise</a> that will be kept once the data has fully landed in the input buffer of the external program.</p>
<p>The <code>Proc::Async</code> object must be created for writing (with <code>Proc::Async.new(:w, $path, @args)</code>). Otherwise an <a href="/type/X::Proc::Async::OpenForWriting">X::Proc::Async::OpenForWriting</a> exception will the thrown.</p>
<p><code>start</code> must have been called before calling method print, otherwise an <a href="/type/X::Proc::Async::MustBeStarted">X::Proc::Async::MustBeStarted</a> exception is thrown.</p>
<h2 id="method_method_put"><a class="u" href="#___top" title="go to top of document">method method put</a></h2>
<p>Defined as:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>put</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;\</span><span class="keyword operator word raku"><span>x</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>c</span></span><span>)</span></span></div></pre><p>Does a <code>.join</code> on the output, adds a newline, and calls <code>.print</code> on it. Will throw if it&#39;s not started, or not open for writing.</p>
<h2 id="method_say"><a class="u" href="#___top" title="go to top of document">method say</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>say</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>output</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>scheduler</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>SCHEDULER</span></span></span><span>)</span></span></div></pre><p>Calls method <code>gist</code> on the <code>$output</code>, adds a newline, encodes it as UTF-8, and sends it to the standard input stream of the external program, encoding it as UTF-8.</p>
<p>Returns a <a href="/type/Promise">Promise</a> that will be kept once the data has fully landed in the input buffer of the external program.</p>
<p>The <code>Proc::Async</code> object must be created for writing (with <code>Proc::Async.new(:w, $path, @args)</code>). Otherwise an <a href="/type/X::Proc::Async::OpenForWriting">X::Proc::Async::OpenForWriting</a> exception will the thrown.</p>
<p><code>start</code> must have been called before calling method say, otherwise an <a href="/type/X::Proc::Async::MustBeStarted">X::Proc::Async::MustBeStarted</a> exception is thrown.</p>
<h2 id="method_Supply"><a class="u" href="#___top" title="go to top of document">method Supply</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>Supply</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bin</span></span></span><span class="keyword operator generic raku"><span>!</span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>Supply</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>enc</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>translate-nl</span></span></span><span>)</span></span></div></pre><p>Returns a <a href="/type/Supply">Supply</a> of merged <a href="/routine/stdout">stdout</a> and <a href="/routine/stderr">stderr</a> streams. If <code>:$bin</code> named argument is provided, the <code>Supply</code> will be binary, producing <a href="/type/Buf">Buf</a> objects, otherwise, it will be in character mode, producing <a href="/type/Str">Str</a> objects and <code>:$enc</code> named argument can specify <a href="/routine/encoding">encoding</a> to use. The <code>:$translate-nl</code> option specifies whether new line endings should be translated for to match those used by the current operating system (e.g. <code>\r\n</code> on Windows).</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>with</span></span><span>&nbsp;</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;«</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>*</span></span><span>EXECUTABLE</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;-</span><span class="routine name raku"><span>e</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>say&nbsp;42;&nbsp;note&nbsp;100</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>»&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤100␤»</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>start</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>It is an error to create both binary and non-binary <a href="/type/Proc::Async#method_Supply"><code>.Supply</code></a>. It is also an error to use both <a href="/type/Proc::Async#method_Supply"><code>.Supply</code></a> and either <a href="/routine/stderr">stderr</a> or <a href="/routine/stdout">stdout</a> supplies.</p>
<h2 id="method_close-stdin"><a class="u" href="#___top" title="go to top of document">method close-stdin</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>close-stdin</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>)</span></span></div></pre><p>Closes the standard input stream of the external program. Programs that read from STDIN often only terminate when their input stream is closed. So if waiting for the promise from <a href="/type/Proc::Async#method_start"><code>.start</code></a> hangs (for a program opened for writing), it might be a forgotten <code>close-stdin</code>.</p>
<p>The <code>Proc::Async</code> object must be created for writing (with <code>Proc::Async.new(:w, $path, @args)</code>). Otherwise an <a href="/type/X::Proc::Async::OpenForWriting">X::Proc::Async::OpenForWriting</a> exception will the thrown.</p>
<p><code>start</code> must have been called before calling method close-stdin, otherwise an <a href="/type/X::Proc::Async::MustBeStarted">X::Proc::Async::MustBeStarted</a> exception is thrown.</p>
<h2 id="method_kill"><a class="u" href="#___top" title="go to top of document">method kill</a></h2>
<p>Defined as</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>kill</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>Signal</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;\</span><span class="routine name raku"><span>signal</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>SIGHUP</span></span><span>)</span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>kill</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;\</span><span class="routine name raku"><span>signal</span></span><span>)</span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>kill</span></span><span>(</span><span class="support type raku"><span>Proc</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;\</span><span class="routine name raku"><span>signal</span></span><span>)</span></span></div></pre><p>Sends a signal to the running program. The signal can be a signal name (&quot;KILL&quot; or &quot;SIGKILL&quot;), an integer (9) or an element of the <code>Signal</code> enum (Signal::SIGKILL); by default and with no argument, the <code>SIGHUP</code> signal will be used.</p>
<h1 id="Type_Graph"><a class="u" href="#___top" title="go to top of document">Type Graph</a></h1>
<figure>
  <figcaption>Type relations for <code>404</code></figcaption>
  <svg></svg>
  <p class="fallback">
    <a
      rel="alternate"
      href="/images/type-graph-404.svg"
      type="image/svg+xml"
      >Expand above chart</a
    >
  </p>
</figure>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/tree/master/doc/Type/Proc/Async.pod6">https://github.com/Raku/doc/tree/master/doc/Type/Proc/Async.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="/js/app.js?v=1"></script>
    <script type="text/javascript" src="/js/search.js?v=3"></script>
</body>
</html>
